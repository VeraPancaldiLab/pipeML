<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute Weighted Feature Importance from Base Models and Meta-Learner for Stacking Models — calculate_feature_importance_stacking • pipeML</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute Weighted Feature Importance from Base Models and Meta-Learner for Stacking Models — calculate_feature_importance_stacking"><meta name="description" content="This function computes the feature importance by weighing the feature importances from
multiple base models in a stacking ensemble, combined with the meta-learner's model importance.
The final importance score for each feature is calculated by multiplying the base model's
feature importance with the meta-learner's weight for each base model."><meta property="og:description" content="This function computes the feature importance by weighing the feature importances from
multiple base models in a stacking ensemble, combined with the meta-learner's model importance.
The final importance score for each feature is calculated by multiplying the base model's
feature importance with the meta-learner's weight for each base model."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pipeML</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pipeML.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/VeraPancaldiLab/pipeML/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute Weighted Feature Importance from Base Models and Meta-Learner for Stacking Models</h1>
      <small class="dont-index">Source: <a href="https://github.com/VeraPancaldiLab/pipeML/blob/main/R/machine_learning.R" class="external-link"><code>R/machine_learning.R</code></a></small>
      <div class="d-none name"><code>calculate_feature_importance_stacking.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function computes the feature importance by weighing the feature importances from
multiple base models in a stacking ensemble, combined with the meta-learner's model importance.
The final importance score for each feature is calculated by multiplying the base model's
feature importance with the meta-learner's weight for each base model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calculate_feature_importance_stacking</span><span class="op">(</span></span>
<span>  <span class="va">base_importance</span>,</span>
<span>  <span class="va">base_models</span>,</span>
<span>  <span class="va">meta_learner</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-base-importance">base_importance<a class="anchor" aria-label="anchor" href="#arg-base-importance"></a></dt>
<dd><p>A list where each element corresponds to a base model and contains a data frame
with feature importances. Each data frame should have a column called <code>importance</code>
(either for the positive class or overall, depending on the type of model).</p></dd>


<dt id="arg-base-models">base_models<a class="anchor" aria-label="anchor" href="#arg-base-models"></a></dt>
<dd><p>A character vector with the names of the base models whose feature importances are
provided in <code>base_importance</code>.</p></dd>


<dt id="arg-meta-learner">meta_learner<a class="anchor" aria-label="anchor" href="#arg-meta-learner"></a></dt>
<dd><p>A <code>caret</code> object representing the trained meta-learner model. This model is used to
obtain weights for each base model, based on their performance in the ensemble.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with two columns:</p>
<dl><dt>features</dt>
<dd><p>The feature names.</p></dd>

<dt>final_importance</dt>
<dd><p>The final weighted importance score for each feature, calculated by summing
the weighted importances across all base models. Features are sorted in descending
order of their final importance score.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function extracts feature importance values from the base models, then computes the weighted importance
for each feature based on the meta-learner's performance. The meta-learner's feature importance is normalized
to ensure the sum of the importances across all models is 1, and it is used as the weight for each base model.
The feature importances from all base models are then aggregated and weighted by their respective meta-learner
importance scores.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/caret/man/varImp.html" class="external-link">varImp</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marcelo Hurtado.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

