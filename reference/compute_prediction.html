<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute Prediction Metrics for a Trained Machine Learning Model — compute_prediction • pipeML</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute Prediction Metrics for a Trained Machine Learning Model — compute_prediction"><meta name="description" content="This function computes prediction metrics for a given machine learning model, including
the confusion matrix, AUROC, AUPRC, and other performance metrics such as Accuracy, Sensitivity,
Specificity, Precision, Recall, F1 score, and MCC. The function also determines the optimal
classification threshold based on a chosen metric (e.g., Accuracy, F1, or AUROC) and generates
a confusion matrix plot."><meta property="og:description" content="This function computes prediction metrics for a given machine learning model, including
the confusion matrix, AUROC, AUPRC, and other performance metrics such as Accuracy, Sensitivity,
Specificity, Precision, Recall, F1 score, and MCC. The function also determines the optimal
classification threshold based on a chosen metric (e.g., Accuracy, F1, or AUROC) and generates
a confusion matrix plot."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pipeML</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pipeML.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/VeraPancaldiLab/pipeML/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute Prediction Metrics for a Trained Machine Learning Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/VeraPancaldiLab/pipeML/blob/main/R/machine_learning.R" class="external-link"><code>R/machine_learning.R</code></a></small>
      <div class="d-none name"><code>compute_prediction.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function computes prediction metrics for a given machine learning model, including
the confusion matrix, AUROC, AUPRC, and other performance metrics such as Accuracy, Sensitivity,
Specificity, Precision, Recall, F1 score, and MCC. The function also determines the optimal
classification threshold based on a chosen metric (e.g., Accuracy, F1, or AUROC) and generates
a confusion matrix plot.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">compute_prediction</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  <span class="va">test_data</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  file.name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  maximize <span class="op">=</span> <span class="st">"Accuracy"</span>,</span>
<span>  return <span class="op">=</span> <span class="cn">F</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>A trained machine learning model (e.g., from <code>caret</code> or other model training functions).</p></dd>


<dt id="arg-test-data">test_data<a class="anchor" aria-label="anchor" href="#arg-test-data"></a></dt>
<dd><p>A matrix or data frame containing the testing dataset (features only).</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>A character vector of true target values for the test data (the observed labels).</p></dd>


<dt id="arg-file-name">file.name<a class="anchor" aria-label="anchor" href="#arg-file-name"></a></dt>
<dd><p>A character string to specify the filename for saving the confusion matrix plot
(optional). If <code>NULL</code>, the plot is not saved.</p></dd>


<dt id="arg-maximize">maximize<a class="anchor" aria-label="anchor" href="#arg-maximize"></a></dt>
<dd><p>A character string indicating which metric to maximize when selecting the best
threshold for the confusion matrix. Options include "Accuracy", "Precision",
"Recall", "Specificity", "Sensitivity", "F1", or "MCC". Default is "Accuracy".</p></dd>


<dt id="arg-return">return<a class="anchor" aria-label="anchor" href="#arg-return"></a></dt>
<dd><p>Logical. Whether to return the results and generated plots.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing:</p>
<dl><dt>Metrics</dt>
<dd><p>A data frame with various performance metrics (Accuracy, Sensitivity, Specificity,
Precision, Recall, F1 score, MCC) for each threshold.</p></dd>

<dt>AUC</dt>
<dd><p>A list containing the AUROC and AUPRC values.</p></dd>

<dt>Predictions</dt>
<dd><p>A data frame with the predicted probabilities for each class (e.g., <code>yes</code> or <code>no</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function first generates predictions for the test dataset using the trained machine learning model.
It then calculates performance metrics for a range of threshold values and selects the threshold that maximizes
the chosen metric (e.g., Accuracy, F1 score, etc.). The function returns the metrics for the best threshold,
including AUROC and AUPRC, and produces a confusion matrix plot that compares predicted versus actual labels.</p>
<p>The confusion matrix plot is saved as a PDF with the name <code>Confusion_Matrix_&lt;file.name&gt;.pdf</code> if a valid
<code>file.name</code> is provided.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/caret/man/confusionMatrix.html" class="external-link">confusionMatrix</a></code>, <code><a href="https://rdrr.io/pkg/caret/man/varImp.html" class="external-link">varImp</a></code>, <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marcelo Hurtado, Vera Pancaldi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

