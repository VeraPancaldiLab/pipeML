% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/machine_learning.R
\name{compute_features.training.ML}
\alias{compute_features.training.ML}
\title{Train machine learning models with optional stacking and feature selection}
\usage{
compute_features.training.ML(
  features_train,
  target_var,
  trait.positive,
  metric = "Accuracy",
  stack,
  k_folds = 10,
  n_rep = 5,
  feature.selection = FALSE,
  seed,
  LODO = FALSE,
  n_boruta = 100,
  boruta_fix = FALSE,
  batch_id = NULL,
  file_name = NULL,
  ncores = NULL,
  return = FALSE
)
}
\arguments{
\item{features_train}{A data frame containing the features used for training.}

\item{target_var}{A vector containing the target variable to predict.}

\item{trait.positive}{Value in \code{target_var} to be considered as the positive class.}

\item{metric}{Character. Metric used for hyperparameter tuning and model selection. Supported values are \code{"Accuracy"}, \code{"AUROC"}, and \code{"AUPRC"}.}

\item{stack}{Logical. Whether to perform model stacking. Default is \code{FALSE}.}

\item{k_folds}{Integer. Number of folds to use in cross-validation.}

\item{n_rep}{Integer. Number of repetitions of the cross-validation.}

\item{feature.selection}{Logical. Whether to apply Boruta feature selection before model training. Default is \code{FALSE}.}

\item{seed}{Integer. Random seed for reproducibility.}

\item{LODO}{Logical. If \code{TRUE}, constructs folds stratified by cohorts (Leave-One-Dataset-Out CV).}

\item{n_boruta}{Integer. Number of iterations to run Boruta. Since Boruta involves randomness, repeated runs improve consistency. Default is 100.}

\item{boruta_fix}{Logical. Whether to fix Borutaâ€™s internal parameters. See \code{compute_boruta()} for details.}

\item{batch_id}{A vector indicating the cohort or batch for each sample (required only if \code{LODO = TRUE}).}

\item{file_name}{Character. File name used to save plots in the \code{Results/} directory.}

\item{ncores}{Integer. Number of cores to use for parallelization. If not given, detectCores() - 1 will be used.}

\item{return}{Logical. Whether to return and save the plots generated by the function.}
}
\value{
A list containing:
\itemize{
\item Trained model (or meta-learner if \code{stack = TRUE})
\item Features used in model training (all features if \code{feature.selection = FALSE})
}
}
\description{
This function trains one or more machine learning models using repeated k-fold cross-validation, with optional model stacking and feature selection using Boruta. It supports stratified cross-validation, including Leave-One-Dataset-Out (LODO) validation when cohort information is available.
}
